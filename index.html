<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Super Bowl Squares</title>

<style>
:root{
  --bg:#0b0f14;
  --text:#e6eaf2;
  --muted:#9ca3af;
  --accent:#22c55e;
  --danger:#ef4444;
  --radius:14px;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  background: radial-gradient(1200px 600px at 20% 0%, #132033 0%, var(--bg) 55%) fixed;
  color:var(--text);
}
.wrap{
  max-width:1100px;
  margin:22px auto;
  padding:0 14px 28px;
}
header{
  background: linear-gradient(180deg, rgba(34,197,94,.12), rgba(96,165,250,.08));
  border:1px solid rgba(255,255,255,.08);
  border-radius:var(--radius);
  padding:14px 16px;
}
h1{margin:0;font-size:18px}
.sub{font-size:13px;color:var(--muted)}
.pillRow{display:flex;gap:10px;margin-top:10px;flex-wrap:wrap}
.pill{
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.08);
  padding:6px 10px;
  border-radius:999px;
  font-size:12px;
}
.pill b{color:var(--accent)}

.btn{
  cursor:pointer;
  border-radius:10px;
  padding:8px 12px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(255,255,255,.06);
  color:var(--text);
  font-weight:600;
  font-size:12px;
}
.btn:hover{background:rgba(255,255,255,.12)}
.btn.primary{border-color:rgba(34,197,94,.4)}

.gridCard{
  margin-top:16px;
  background:rgba(18,24,38,.72);
  border:1px solid rgba(255,255,255,.08);
  border-radius:var(--radius);
  padding:14px;
}

/* Board layout */
.boardWrapper{
  position:relative;
  padding-left:60px;
}
.team1Label{
  text-align:center;
  font-weight:800;
  margin-bottom:6px;
}
.team2Label{
  position:absolute;
  left:0;
  top:50%;
  transform:rotate(-90deg) translate(-50%,0);
  transform-origin:left top;
  font-weight:800;
  white-space:nowrap;
}

.board{
  display:grid;
  grid-template-columns: repeat(10, 1fr);
  gap:6px;
}

.cell{
  border-radius:10px;
  border:1px solid rgba(255,255,255,.08);
  min-height:48px;
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;
  font-size:12px;
  font-weight:700;
  background:rgba(15,23,42,.9);
  cursor:pointer;
}
.cell:hover{background:rgba(30,41,59,.9)}
.cell.taken{
  cursor:not-allowed;
  background:rgba(17,24,39,.95);
  opacity:.9;
}

/* Modal */
.modalBack{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:50;
}
.modal{
  width:100%;
  max-width:380px;
  background:#0f172a;
  border:1px solid rgba(255,255,255,.12);
  border-radius:14px;
  padding:16px;
}
.modal h3{margin:0 0 10px 0;font-size:15px}
.modal input{
  width:100%;
  padding:10px 12px;
  border-radius:10px;
  border:1px solid rgba(255,255,255,.15);
  background:rgba(255,255,255,.05);
  color:var(--text);
}
.modal .row{
  display:flex;
  justify-content:flex-end;
  gap:8px;
  margin-top:10px;
}
.status{font-size:12px;margin-top:6px;color:var(--danger)}
</style>
</head>

<body>
<div class="wrap">
<header>
  <h1>Super Bowl Squares</h1>
  <div class="sub">Click a square to claim it Â· $10 per square</div>

  <div class="pillRow">
    <div class="pill">Blank Squares: <b id="blankCount">100</b></div>
    <div class="pill">Selected: <b id="selectedCount">0</b></div>
    <div class="pill">Total Pot: <b id="totalPot">$0</b></div>
  </div>

  <div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap">
    <button class="btn primary" id="resetBtn">Reset Board (Admin)</button>
  </div>
</header>

<div class="gridCard">
  <div class="boardWrapper">
    <div class="team1Label" id="team1Label">TEAM 1</div>
    <div class="team2Label" id="team2Label">TEAM 2</div>
    <div class="board" id="board"></div>
  </div>
</div>
</div>

<!-- Name Modal -->
<div class="modalBack" id="nameModal">
  <div class="modal">
    <h3>Claim Square</h3>
    <input id="nameInput" placeholder="Enter your name"/>
    <div class="status" id="nameStatus"></div>
    <div class="row">
      <button class="btn" onclick="closeNameModal()">Cancel</button>
      <button class="btn primary" onclick="confirmName()">Claim</button>
    </div>
  </div>
</div>

<!-- Access Modal -->
<div class="modalBack" id="accessModal">
  <div class="modal">
    <h3>Enter Pool Access Code</h3>
    <input id="accessInput" placeholder="Access code"/>
    <div class="status" id="accessStatus"></div>
    <div class="row">
      <button class="btn primary" onclick="confirmAccess()">Unlock</button>
    </div>
  </div>
</div>

<script>
const PRICE_PER_SQUARE = 10;
const POOL_ACCESS_CODE = "SB2026";

// Axis values hidden from UI (you can populate later)
const rowNums = [...Array(10).keys()];
const colNums = [...Array(10).keys()];

let state = load() || {
  team1:"TEAM 1",
  team2:"TEAM 2",
  squares:Array.from({length:100}, ()=>"")
};

let selectedIndex = null;

const boardEl = document.getElementById("board");
const blankCountEl = document.getElementById("blankCount");
const selectedCountEl = document.getElementById("selectedCount");
const totalPotEl = document.getElementById("totalPot");

function render(){
  boardEl.innerHTML = "";
  state.squares.forEach((name,idx)=>{
    const d = document.createElement("div");
    d.className = "cell" + (name ? " taken":"");
    d.textContent = name || "Tap to claim";
    d.onclick = ()=>openClaim(idx);
    boardEl.appendChild(d);
  });

  const taken = state.squares.filter(v=>v).length;
  blankCountEl.textContent = 100 - taken;
  selectedCountEl.textContent = taken;
  totalPotEl.textContent = "$" + (taken * PRICE_PER_SQUARE);
}

function openClaim(idx){
  if(state.squares[idx]) return;
  if(!hasAccess()){
    selectedIndex = idx;
    openAccessModal();
    return;
  }
  selectedIndex = idx;
  openNameModal();
}

/* Access Gate */
function hasAccess(){
  return localStorage.getItem("sb_access") === "1";
}
function openAccessModal(){
  document.getElementById("accessModal").style.display="flex";
}
function confirmAccess(){
  const val = document.getElementById("accessInput").value.trim();
  if(val === POOL_ACCESS_CODE){
    localStorage.setItem("sb_access","1");
    closeAccessModal();
    openNameModal();
  } else {
    document.getElementById("accessStatus").textContent = "Incorrect code.";
  }
}
function closeAccessModal(){
  document.getElementById("accessModal").style.display="none";
  document.getElementById("accessInput").value="";
  document.getElementById("accessStatus").textContent="";
}

/* Name Modal */
function openNameModal(){
  document.getElementById("nameModal").style.display="flex";
}
function closeNameModal(){
  document.getElementById("nameModal").style.display="none";
  document.getElementById("nameInput").value="";
  document.getElementById("nameStatus").textContent="";
}
function confirmName(){
  const name = document.getElementById("nameInput").value.trim();
  if(!name){
    document.getElementById("nameStatus").textContent = "Name required.";
    return;
  }
  state.squares[selectedIndex] = name;
  save();
  closeNameModal();
  render();
}

/* Admin */
document.getElementById("resetBtn").onclick = ()=>{
  if(!location.hash.includes("admin")){
    alert("Add #admin to the URL to reset.");
    return;
  }
  if(confirm("Reset board?")){
    state.squares = Array.from({length:100}, ()=>"");
    save();
    render();
  }
};

/* Storage */
function save(){
  localStorage.setItem("sb_state", JSON.stringify(state));
}
function load(){
  try{ return JSON.parse(localStorage.getItem("sb_state")); }
  catch{ return null; }
}

render();
</script>
</body>
</html>
